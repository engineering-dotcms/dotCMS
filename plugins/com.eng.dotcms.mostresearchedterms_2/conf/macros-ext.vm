#macro (limitedMostResearchedTerms $urlAddress $searchParameter $limit)
			##Get all the terms stored into the database
			#set($allTerms = $mrt.getAllTerms($request,$limit))

			## calculate the ranges
			#set($tagCountMin = 0)
			#set($tagCountMax = 0)
			#foreach($term in $allTerms)
				#set($occur = $mrt.getOccurByTerm($term,$request))
				#if($tagCountMin == 0)
					#set($tagCountMin = $occur)
				#end
				#if($tagCountMin > $occur)
					#set($tagCountMin = $occur)
				#end
				#if($tagCountMax < $occur)
					#set($tagCountMax = $occur)
				#end
			#end

			#set($rangeMinMax = $tagCountMax - $tagCountMin)

			#set($interval = 1)
			#if($rangeMinMax > 5)
				#set($interval = $rangeMinMax / 5)
			#end

			#set($range1 = $tagCountMin)
			#set($range2 = $range1 + $interval)
			#set($range3 = $range2 + $interval)
			#set($range4 = $range3 + $interval)
			#set($range5 = $range4 + $interval)

			#if ($urlAddress.indexOf("?") > 0)
			    #if($urlAddress.indexOf("&amp;") == -1)
			    	#set($url = "${urlAddress.replaceAll('&','&amp;')}&amp;$searchParameter=")
			    #else
					#set($url = "${urlAddress}&amp;$searchParameter=")
				#end
			#else
				#set($url = "$urlAddress?$searchParameter=")
			#end
			
			<style type="text/css" media="all">
				.tagCloud .xSmallTag{
					font-size: .75em;
				}
				.tagCloud .smallTag{
					font-size: .95em;
				}
				.tagCloud .mediumTag{
					font-size: 1.25em;
				}
				.tagCloud .largeTag{
					font-size: 2em;
				}
				.tagCloud .xLargeTag{
					font-size: 3em;
				}
			</style>
			
			<div class="tagCloud">
				#foreach($term in $allTerms)
					#set($tagCount = $mrt.getOccurByTerm($term,$request))
	
					#set($class = "xSmallTag")
					#if($tagCount > $range5)
						#set($class = "xLargeTag")
					#elseif($tagCount > $range4)
						#set($class = "largeTag")
					#elseif($tagCount > $range3)
						#set($class = "mediumTag")
					#elseif($tagCount > $range2)
						#set($class = "smallTag")
					#end
					#if($UtilMethods.isSet($urlAddress) && $UtilMethods.isSet($searchParameter))
						<a href="$url$term" class="$class" title="$tagCount occ">$term</a>
					#else
						<span class="$class">$term</span>
					#end		
				#end
			</div>	
#end

#macro (mostResearchedTerms $urlAddress $searchParameter)
			##Get all the terms stored into the database
			#set($allTerms = $mrt.getAllTerms($request,-1))

			## calculate the ranges
			#set($tagCountMin = 0)
			#set($tagCountMax = 0)
			#foreach($term in $allTerms)
				#set($occur = $mrt.getOccurByTerm($term,$request))
				#if($tagCountMin == 0)
					#set($tagCountMin = $occur)
				#end
				#if($tagCountMin > $occur)
					#set($tagCountMin = $occur)
				#end
				#if($tagCountMax < $occur)
					#set($tagCountMax = $occur)
				#end
			#end

			#set($rangeMinMax = $tagCountMax - $tagCountMin)

			#set($interval = 1)
			#if($rangeMinMax > 5)
				#set($interval = $rangeMinMax / 5)
			#end

			#set($range1 = $tagCountMin)
			#set($range2 = $range1 + $interval)
			#set($range3 = $range2 + $interval)
			#set($range4 = $range3 + $interval)
			#set($range5 = $range4 + $interval)

			#if ($urlAddress.indexOf("?") > 0)
			    #if($urlAddress.indexOf("&amp;") == -1)
			    	#set($url = "${urlAddress.replaceAll('&','&amp;')}&amp;$searchParameter=")
			    #else
					#set($url = "${urlAddress}&amp;$searchParameter=")
				#end
			#else
				#set($url = "$urlAddress?$searchParameter=")
			#end
			
			<style type="text/css" media="all">
				.tagCloud .xSmallTag{
					font-size: .75em;
				}
				.tagCloud .smallTag{
					font-size: .95em;
				}
				.tagCloud .mediumTag{
					font-size: 1.25em;
				}
				.tagCloud .largeTag{
					font-size: 2em;
				}
				.tagCloud .xLargeTag{
					font-size: 3em;
				}
			</style>
			
			<div class="tagCloud">
				#foreach($term in $allTerms)
					#set($tagCount = $mrt.getOccurByTerm($term,$request))
	
					#set($class = "xSmallTag")
					#if($tagCount > $range5)
						#set($class = "xLargeTag")
					#elseif($tagCount > $range4)
						#set($class = "largeTag")
					#elseif($tagCount > $range3)
						#set($class = "mediumTag")
					#elseif($tagCount > $range2)
						#set($class = "smallTag")
					#end
					#if($UtilMethods.isSet($urlAddress) && $UtilMethods.isSet($searchParameter))
						<a href="$url$term" class="$class" title="$tagCount occ">$term</a>
					#else
						<span class="$class">$term</span>
					#end		
				#end
			</div>	
#end